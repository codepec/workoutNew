<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>Iron Insanity — Settings</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="../manifest.json">
<meta name="theme-color" content="#00FF66">

<link rel="apple-touch-icon" href="../icons/icon-192x192.png">
<link rel="icon" href="../favicon.ico" type="image/png">

<link rel="stylesheet" href="../styles/app.css">

<style>


/* HEADER */
header{
  width:100%;
  max-width:600px;
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:20px;
}



h1{
  margin:0;
  font-size:1.4rem;
}

/* CONTENT */
.content{
  padding: 25px;
  display: flex;
  flex-direction: column;
  margin-top:20px;
  
}

/* CARD */
.card{
  background:#111827;
  border:2px solid #374151;
  border-radius:20px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
}

/* SETTING ROW */
.setting{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 0;
  border-bottom:1px solid #1f2937;
}

.setting:last-child{
  border-bottom:none;
}

.setting-label{
  font-weight:600;
  opacity:.95;
}

/* SWITCH */
.switch{
  position:relative;
  width:52px;
  height:28px;
}

.switch input{
  display:none;
}

.slider{
  position:absolute;
  inset:0;
  background:#374151;
  border-radius:999px;
  cursor:pointer;
  transition:.25s;
}

.slider:before{
  content:"";
  position:absolute;
  height:22px;
  width:22px;
  left:3px;
  top:3px;
  background:white;
  border-radius:50%;
  transition:.25s;
}

input:checked + .slider{
  background:#22c55e;
}

input:checked + .slider:before{
  transform:translateX(24px);
}

/* ACTION BUTTONS */
.action-btn{
  width:100%;
  margin-top:14px;
  padding:14px;
  border-radius:14px;
  border:none;
  font-weight:700;
  cursor:pointer;
  background:#374151;
  color:white;
}

.action-btn.danger{
  background:#7f1d1d;
}

.action-btn:hover{
  transform:translateY(-2px);
}
</style>
</head>

<body>

<div class="content">
<div class="card">

  <!-- SOUND -->
  <div class="setting">
    <div class="setting-label">Soundeffekte</div>
    <label class="switch">
      <input type="checkbox" id="soundToggle">
      <span class="slider"></span>
    </label>
  </div>

  <!-- VIBRATION -->
  <div class="setting">
    <div class="setting-label">Vibration</div>
    <label class="switch">
      <input type="checkbox" id="vibrationToggle">
      <span class="slider"></span>
    </label>
  </div>

</div>

<div class="card" style="margin-top:16px;">

  <button class="action-btn" onclick="resetWorkoutProgress()">
    Workout-Fortschritt zurücksetzen
  </button>

  <button class="action-btn" onclick="resetWeek()">
    Woche zurücksetzen
  </button>

  <button class="action-btn danger" onclick="resetStreak()">
    Streak löschen
  </button>

</div>
</div>
<script>

/* =========================
   LOAD SETTINGS
========================= */
const soundToggle = document.getElementById("soundToggle");
const vibrationToggle = document.getElementById("vibrationToggle");

soundToggle.checked = localStorage.getItem("sound") !== "off";
vibrationToggle.checked = localStorage.getItem("vibration") !== "off";

/* =========================
   SAVE SETTINGS
========================= */
soundToggle.onchange = () => {
  localStorage.setItem("sound", soundToggle.checked ? "on" : "off");
};

vibrationToggle.onchange = () => {
  localStorage.setItem("vibration", vibrationToggle.checked ? "on" : "off");
};

/* =========================
   ACTIONS
========================= */
function resetWorkoutProgress(){

  const w = localStorage.getItem("selectedWeek") || "1";
  const d = localStorage.getItem("selectedDay") || "Push";

  localStorage.setItem("workoutProgress", JSON.stringify({
    week: Number(w),
    day: d,
    exIndex: 0,
    setIndex: 0
  }));

  alert("Aktuelles Workout neu gestartet");
}

function resetWeek(){

  // Woche & Trainingstag auf Start
  localStorage.setItem("selectedWeek", "1");
  localStorage.setItem("selectedDay", "Push");
  localStorage.setItem("lastDay", "Push");

  // laufendes Workout zurücksetzen
  localStorage.setItem("workoutProgress", JSON.stringify({
    week: 1,
    day: "Push",
    exIndex: 0,
    setIndex: 0
  }));

  alert("Plan auf Woche 1 / Push zurückgesetzt");
}

function resetStreak(){
  localStorage.removeItem("streak");
  alert("Streak gelöscht");
}

/* =========================
   NAV
========================= */
function goBack(){
  history.back();
}

</script>

<script src="../components/layout.js"></script>
<script>
loadLayout("../pages/settings.html","../index.html");
</script>

</body>
</html>
